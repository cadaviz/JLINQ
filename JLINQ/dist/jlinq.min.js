function ArrayIterator(n){function i(){return(t++,t<n.length)?(this.current=n[t],!0):(this.completed=!0,!1)}if(Iterator.call(this,n),n instanceof Array)this.iterateFunction=i;else throw new Error("Invalid argument: _source.");var t=-1;this.resetFunction=function(){t=-1}}function Grouping(n,t,i){this.key=n;this.hashCode=t;this.hashNext=i;this.next=undefined;this.elements=[];this.add=function(n){this.elements.push(n)}}function Lookup(){this.groupings=new Array(7);var n,t=0,i=function(n){return!n||!n.getHashCode?0:n.getHashCode()&2147483647},r=function(){var f=t*2+1,r=new Array(f),i=n,u;do i=i.next,u=i.hashCode%f,i.hashNext=r[u],r[u]=i;while(i!=n);this.groupings=r};this.getGrouping=function(u,f){for(var s,o=i(u),e=this.groupings[o%this.groupings.length];e!=null;e=e.hashNext)if(e.hashCode===o)return e;return f?(t===this.groupings.length&&r(),s=o%this.groupings.length,e=new Grouping(u,o,this.groupings[s]),this.groupings[s]=e,n?(e.next=n.next,n.next=e):e.next=e,n=e,t++,e):undefined};this.getLastGrouping=function(){return n}}function GroupByIterator(n,t,i){Iterator.call(this,n);var u=new Lookup,r,f=function(){var t=[],n=u.getLastGrouping();if(n!=null)do n=n.next,t.push({key:n.key,elements:n.elements});while(n!=u.getLastGrouping());r=new ArrayIterator(t)},e=function(n){u.getGrouping(t(n),!0).add(i(n))},o=function(){for(var t=0;t<n.length;t++)e(n[t]);f()},s=function(){while(n.moveNext())e(n.current);f()};if(this.iterateFunction=function(){while(r.moveNext())return this.current=r.current,!0;return this.completed=!0,!1},this.resetFunction=function(){r.reset()},n instanceof Array)o();else if(n instanceof Iterator)s();else throw new Error("Invalid argument: _source.");if(!t)throw new Error("Invalid null argument: _keySelector.");if(!i)throw new Error("Invalid null argument: _elementSelector.");}function Iterator(n){if(!n)throw new Error("Invalid null argument: _source.");this.completed=!1;this.current=undefined;this.iterateFunction=function(){return!1};this.resetFunction=function(){};this.moveNext=function(){return this.completed?!1:(this.current=undefined,this.iterateFunction())};this.reset=function(){this.completed=!1;this.resetFunction()}}function OrderByIterator(n,t,i){function s(n,t){return n===t?0:n<t?-1:1}function h(n,i){u=new Array(i);for(var r=0;r<i;r++)u[r]=t(n[r])}function e(n,t){var r=s(u[n],u[t]);return r===0?n-t:i?-r:r}function c(n,t){var r,i;for(h(n,t),r=new Array(t),i=0;i<t;i++)r[i]=i;return f(r,0,t-1),r}function f(n,t,i){var s;do{var r=t,u=i,o=n[r+(u-r>>1)];do{while(r<n.length&&e(o,n[r])>0)r++;while(u>=0&&e(o,n[u])<0)u--;if(r>u)break;r<u&&(s=n[r],n[r]=n[u],n[u]=s);r++;u--}while(r<=u);u-t<=i-r?(t<u&&f(n,t,u),t=r):(r<i&&f(n,r,i),i=u)}while(t<i)}function o(n){var i=[],u,t;if(n.length>0)for(u=c(n,n.length),t=0;t<n.length;t++)i.push(n[u[t]]);r=new ArrayIterator(i)}function l(){o(n.toArray())}Iterator.call(this,n);var r,u;if(this.iterateFunction=function(){while(r.moveNext())return this.current=r.current,!0;return this.completed=!0,!1},this.resetFunction=function(){r.reset()},n instanceof Array)o(n);else if(n instanceof Iterator)l();else throw new Error("Invalid argument: _source.");if(!t)throw new Error("Invalid null argument: _keySelector.");}function SelectManyIterator(n,t){function u(){if(i&&this.iterateCurrent())return!0;r++;for(var u=r;u<n.length;u++)if(r=u,i=new ArrayIterator(t(n[u])),this.iterateCurrent())return!0;return this.completed=!0,!1}function f(){if(i&&this.iterateCurrent())return!0;while(n.moveNext())if(i=new ArrayIterator(t(n.current)),this.iterateCurrent())return!0;return this.completed=!0,!1}if(Iterator.call(this,n),n instanceof Array)this.iterateFunction=u;else if(n instanceof Iterator)this.iterateFunction=f;else throw new Error("Invalid argument: _source.");if(!t)throw new Error("Invalid null argument: _selector.");var r=-1,i;this.iterateCurrent=function(){return i.moveNext()?(this.current=i.current,!0):!1};this.resetFunction=function(){n instanceof Iterator&&n.reset();r=-1;i=undefined}}function SkipIterator(n,t){function f(){return r>0&&r<n.length?(this.current=n[r],r++,!0):(this.completed=!0,!1)}function e(){while(i>0&&n.moveNext())i--;if(i<=0)while(n.moveNext())return this.current=n.current,!0;return this.completed=!0,!1}if(Iterator.call(this,n),n instanceof Array)this.iterateFunction=f;else if(n instanceof Iterator)this.iterateFunction=e;else throw new Error("Invalid argument: _source.");var u=t,i=u,r=Math.min(i,n.length);this.resetFunction=function(){n instanceof Iterator&&n.reset();i=u;r=Math.min(i,n.length)}}function TakeIterator(n,t){function f(){return(i++,i<r&&i<n.length)?(this.current=n[i],!0):(this.completed=!0,!1)}function e(){while(n.moveNext())return this.current=n.current,--r==0&&(this.completed=!0),!0;return this.completed=!0,!1}if(Iterator.call(this,n),n instanceof Array)this.iterateFunction=f;else if(n instanceof Iterator)this.iterateFunction=e;else throw new Error("Invalid argument: _source.");var u=t,r=u,i=-1;this.resetFunction=function(){n instanceof Iterator&&n.reset();r=u;i=-1}}function WhereSelectIterator(n,t,i){function o(){var n,t;for(e++,n=e;n<r.length;n++)if(t=r[n],!u||u(t))return e=n,this.current=f?f(t):t,!0;return this.completed=!0,!1}function s(){while(r.moveNext())if(!u||u(r.current))return this.current=f?f(r.current):r.current,!0;return this.completed=!0,!1}if(Iterator.call(this,n),n instanceof Array)this.iterateFunction=o;else if(n instanceof Iterator)this.iterateFunction=s;else throw new Error("Invalid argument: _source.");var r=n,u=t,f=i,e=-1;this.setPredicate=function(){u=u};this.getPredicate=function(){return u};this.setSelector=function(n){f=n};this.getSelector=function(){return f};this.resetFunction=function(){r instanceof Iterator&&r.reset();e=-1}}ArrayIterator.prototype=Iterator.prototype,function(){function n(n,t){return n==t}Array.prototype.asIterator=function(){return new ArrayIterator(this)};Array.prototype.where=function(n){return new WhereSelectIterator(this,n)};Array.prototype.select=function(n){return new WhereSelectIterator(this,undefined,n)};Array.prototype.take=function(n){return new TakeIterator(this,n)};Array.prototype.skip=function(n){return new SkipIterator(this,n)};Array.prototype.firstOrDefault=function(n){return this.length>0?this[0]:n};Array.prototype.lastOrDefault=function(n){return this.length>0?this[this.length-1]:n};Array.prototype.any=function(n){if(n){for(var t=0;t<this.length;t++)if(n(this[t]))return!0;return!1}return this.length>0};Array.prototype.all=function(n){if(!n)throw new Error("Invalid null argument: predicate.");for(var t=0;t<this.length;t++)if(!n(this[t]))return!1;return!0};Array.prototype.count=function(){return this.length};Array.prototype.contains=function(t,i){for(var u=i||n,r=0;r<this.length;r++)if(u(this[r],t))return!0;return!1};Array.prototype.elementAt=function(n){if(n<0||n>=this.length)throw new Error("Index out of range.");return this[n]};Array.prototype.elementAtOrDefault=function(n,t){return n<0||n>=this.length?t:this[n]};Array.prototype.selectMany=function(n){return new SelectManyIterator(this,n)};Array.prototype.groupBy=function(n,t){return new GroupByIterator(this,n,t)};Array.prototype.insert=function(n,t){this.splice(n,0,t)};Array.prototype.orderBy=function(n){return new OrderByIterator(this,n,!1)};Array.prototype.orderByDescending=function(n){return new OrderByIterator(this,n,!0)};Array.prototype.forEach=function(n){var i,t,r;if(n)for(i=!1,t=0;t<this.length;t++)if(r={$index:t,$break:function(){i=!0}},n(this[t],r),i)break};Iterator.prototype.asIterator=function(){return this.reset()};Iterator.prototype.where=function(n){return this.getPredicate&&!this.getPredicate()?(this.setPredicate(n),this):new WhereSelectIterator(this,n)};Iterator.prototype.select=function(n){return this.getSelector&&!this.getSelector()?(this.setSelector(n),this):new WhereSelectIterator(this,undefined,n)};Iterator.prototype.take=function(n){return new TakeIterator(this,n)};Iterator.prototype.skip=function(n){return new SkipIterator(this,n)};Iterator.prototype.firstOrDefault=function(n){if(this.moveNext()){var t=this.current;return this.reset(),t}return n};Iterator.prototype.lastOrDefault=function(n){if(this.moveNext()){var t;do t=this.current;while(this.moveNext());return this.reset(),t}return n};Iterator.prototype.any=function(n){if(n){while(this.moveNext())if(n(this.current))return this.reset(),!0;return this.reset(),!1}var t=this.moveNext();return this.reset(),t};Iterator.prototype.all=function(n){if(!n)throw new Error("Invalid null argument: predicate.");while(this.moveNext())if(!n(this.current))return this.reset(),!1;return this.reset(),!0};Iterator.prototype.count=function(){for(var n=0;this.moveNext();)n++;return this.reset(),n};Iterator.prototype.contains=function(t,i){for(var r=i||n;this.moveNext();)if(r(this.current,t))return this.reset(),!0;return this.reset(),!1};Iterator.prototype.elementAt=function(n){for(var t;;){if(!this.moveNext())throw new Error("Sequence is empty.");if(n==0){t=this.current;break}n--}return this.reset(),t};Iterator.prototype.elementAtOrDefault=function(n,t){if(n<0)return t;for(var i=t;;){if(!this.moveNext())break;if(n===0){i=this.current;break}n--}return this.reset(),i};Iterator.prototype.toArray=function(){for(var n=[];this.moveNext();)n.push(this.current);return this.reset(),n};Iterator.prototype.selectMany=function(n){return new SelectManyIterator(this,n)};Iterator.prototype.groupBy=function(n,t){return new GroupByIterator(this,n,t)};Iterator.prototype.orderBy=function(n){return new OrderByIterator(this,n,!1)};Iterator.prototype.orderByDescending=function(n){return new OrderByIterator(this,n,!0)};Iterator.prototype.forEach=function(n){var t,i,r;if(n){for(t=!1,i=0;this.moveNext();){if(r={$index:i,$break:function(){t=!0}},n(this.current,r),t)break;i++}this.reset()}}}();GroupByIterator.prototype=Iterator.prototype;String.prototype.getHashCode=function(){var n=0,t,i,r;if(this.length===0)return n;for(t=0,r=this.length;t<r;t++)i=this.charCodeAt(t),n=(n<<5)-n+i|0;return n};Number.prototype.getHashCode=function(){var n=this;return n=(n>>16^n)*73244475,n=(n>>16^n)*73244475,n>>16^n};Object.prototype.getHashCode=function(){var n,i,u,t,r;for(u in this)if(t=this[u],r=typeof t,t&&t.getHashCode&&r!=="object"&&r!=="function")if(n)if(i)break;else i=t.getHashCode();else n=t.getHashCode();return n&&i?(n|i).getHashCode():n?n.getHashCode():0};Date.prototype.getHashCode=function(){return this.getTime()};OrderByIterator.prototype=Iterator.prototype;SelectManyIterator.prototype=Iterator.prototype;SkipIterator.prototype=Iterator.prototype;TakeIterator.prototype=Iterator.prototype;WhereSelectIterator.prototype=Iterator.prototype;